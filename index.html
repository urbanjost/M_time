

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="Fortran date and time manipulation and presentation">
    <meta name="author" content="John S. Urban" >
    <link rel="icon" href="./favicon.png">

    <title> M_time </title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- Font Awesome -->
    <link href="./css/fontawesome.min.css" rel="stylesheet">
    <link href="./css/brands.min.css" rel="stylesheet">
    <link href="./css/regular.min.css" rel="stylesheet">
    <link href="./css/solid.min.css" rel="stylesheet">
    <link href="./css/v4-font-face.min.css" rel="stylesheet">
    <link href="./css/v4-shims.min.css" rel="stylesheet">
    <!-- MathJax -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { equationNumbers: { autoNumber: "AMS" } }
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async
            integrity="sha256-DViIOMYdwlM/axqoGDPeUyf0urLoHMN4QACBKyB58Uw=" crossorigin="anonymous"></script>
    <!-- Other scripts and stylesheets -->
    <link href="./css/local.css" rel="stylesheet">
    <link href="./css/pygments.css" rel="stylesheet">
    <script src="./js/svg-pan-zoom.min.js"></script>
  </head>

  <body>

    <!-- Fixed navbar -->
    <div class="container-fluid mb-sm-4 mb-xl-2">
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
          <a class="navbar-brand" href="./index.html">M_time </a>
          <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar"
                  aria-expanded="false" aria-controls="navbar" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon">
          </button>

          <div id="navbar" class="navbar-collapse collapse">
            <ul class="navbar-nav">
                  <li class="nav-item">
                    <a class="nav-link" href="./lists/files.html">Source Files</a>
                  </li>
                <li class="nav-item">
                  <a class="nav-link" href="./lists/modules.html">Modules</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="./lists/procedures.html">Procedures</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="./lists/types.html">Derived Types</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="./lists/programs.html">Programs</a>
                </li>
            </ul>
              <div class="d-flex align-items-end flex-grow-1">
                <form action="./search.html" role="search" class="ms-auto">
                  <input type="text" class="form-control" aria-label="Search" placeholder="Search" name="q" id="tipue_search_input" autocomplete="off" required>
                </form>
              </div>
          </div><!--/.nav-collapse -->
        </div>
      </nav>
    </div>

    <div class="container">
  <!-- Main component for a primary marketing message or call to action -->
    <div class="p-5 mb-4 bg-light border rounded-3" id="jumbotron">
      <p>Fortran date and time manipulation and presentation</p>
        <p> Find us on&hellip;</p>
      <p>
        <a class="btn btn-lg btn-primary" href="https://github.com/urbanjost/M_time" role="button">GitHub</a>
        
        
        
        
        <a class="btn btn-lg btn-danger" style="float:right" href="https://github.com/urbanjost/M_time/archive/refs/heads/master.zip" role="button">Download the Source</a>
      </p>
    </div>

      <div class="row" id='text'>
        <div class=col-md-8>
          <h1>M_time</h1>
          <!--
author_pic:
twitter:
website:
-->
<!-- M_timestamp -->
<p><a href="https://urbanjost.github.io/M_time/fpm-ford/index.html"><img alt="pocketwatch" src="docs/images/M_time.3m_time.gif"></a></p>
<h1 id="m_time"><a href="https://urbanjost.github.io/M_time/man3.html">M_time</a></h1>
<h2 id="name">Name</h2>
<p>M_time - Fortran module for manipulating and presenting time and date values</p>
<h2 id="description">Description</h2>
<p>M_time(3f) displays Civilian Calendar dates in many formats.</p>
<p>In addition to high-level date formatting, it can manipulate or read
many other date representations &hellip;</p>
<ul>
<li>Julian and Modified Julian Dates</li>
<li>Baseday and Seconds Dates</li>
<li>Unix Epoch Dates</li>
<li>High-level date formatting</li>
<li>Ordinal days of the year</li>
<li>days of the week</li>
<li>ISO-8601 week numbers</li>
<li>month and weekday names</li>
<li>(limited) internationalization</li>
</ul>
<p><strong>Julian</strong> and <strong>Unix Epoch Dates</strong> are particularly useful for
manipulating dates in simple numeric expressions. They are numbers with
units of days and seconds respectively from a fixed date that you can
easily convert to and from. So you can convert any date to a Julian Date,
subtract one and you have the date for the day before, for example.</p>
<p>The <code>M_time Fortran</code> module complements the <code>DATE_AND_TIME(3f)</code> procedure
( it is the standard Fortran intrinsic subroutine that returns the
current date and time in the Gregorian calendar). That is, the primary
way this module represents dates is as an integer array with the same
meaning for elements as defined by the <code>DATE_AND_TIME(3f)</code> routine.</p>
<p>The extensive formatting options include showing <code>SYSTEM_CLOCK(3f)</code>
and <code>CPU_USAGE(3f)</code> information along with Gregorian date information,
allowing for the easy incorporation of timing information into program
messages.</p>
<p>In addition to conventional Civilian Calendar dates, the module supports
the ISO-8601 standard.</p>
<p>Procedural, Functional, and OOP (Object Oriented Programming) interfaces
are provided.</p>
<p>Each routine is accompanied by a man(1) page which includes a sample
program for that procedure. An HTML manual, the source, and example
programs for each procedure are included in the package.</p>
<h2 id="procedures">Procedures</h2>
<h3 id="epoch-time-ut-starts-at-0000-on-1-jan-1970">Epoch Time (UT starts at 0000 on 1 Jan. 1970)</h3>
<ul>
<li><strong><a href="https://urbanjost.github.io/M_time/date_to_unix.3m_time.html">date_to_unix</a> (dat,UNIXTIME,IERR)</strong> ! Convert date array to Unix Time</li>
<li><strong><a href="https://urbanjost.github.io/M_time/unix_to_date.3m_time.html">unix_to_date</a>(unixtime,DAT,IERR)</strong> ! Convert Unix Time to date array</li>
<li><strong><a href="https://urbanjost.github.io/M_time/d2u.3m_time.html">d2u</a>(dat) result (UNIXTIME)</strong>  ! Convert date array to Unix Time</li>
<li><strong><a href="https://urbanjost.github.io/M_time/u2d.3m_time.html">u2d</a>(unixtime) result (DAT)</strong>  ! Convert Unix Time to date array</li>
</ul>
<h3 id="julian">Julian</h3>
<ul>
<li><strong><a href="https://urbanjost.github.io/M_time/julian_to_date.3m_time.html">julian_to_date</a>(julian,DAT,IERR)</strong> ! Convert Julian Date to date array</li>
<li><strong><a href="https://urbanjost.github.io/M_time/date_to_julian.3m_time.html">date_to_julian</a>(dat,JULIAN,IERR)</strong> ! Convert date array to Julian Date</li>
<li><strong><a href="https://urbanjost.github.io/M_time/d2j.3m_time.html">d2j</a>(dat) result (JULIAN)</strong>    ! Convert date array to Julian Date</li>
<li><strong><a href="https://urbanjost.github.io/M_time/j2d.3m_time.html">j2d</a>(julian) result (DAT)</strong>    ! Convert Julian Date to date array</li>
</ul>
<h3 id="modified-julian">Modified Julian</h3>
<ul>
<li><strong><a href="https://urbanjost.github.io/M_time/modified_julian_to_date.3m_time.html">modified_julian_to_date</a>(modified_julian,DAT,IERR)</strong> ! Convert Modified Julian Date to date array</li>
<li><strong><a href="https://urbanjost.github.io/M_time/date_to_modified_julian.3m_time.html">date_to_modified_julian</a>(dat,MODIFIED_JULIAN,IERR)</strong> ! Convert date array to Modified Julian Date</li>
<li><strong><a href="https://urbanjost.github.io/M_time/d2m.3m_time.html">d2m</a>(dat) result (MODIFIED_JULIAN)</strong>    ! Convert date array to Modified Julian Date</li>
<li><strong><a href="https://urbanjost.github.io/M_time/m2d.3m_time.html">m2d</a>(modified_julian) result (DAT)</strong>    ! Convert Modified Julian Date to date array</li>
</ul>
<h3 id="baseday-and-seconds">Baseday and Seconds</h3>
<ul>
<li><strong><a href="https://urbanjost.github.io/M_time/bas_to_date.3m_time.html">bas_to_date</a>(bas,DAT,IERR)</strong> ! Convert Baseday and Seconds to date array</li>
<li><strong><a href="https://urbanjost.github.io/M_time/date_to_bas.3m_time.html">date_to_bas</a>(dat,bas,IERR)</strong> ! Convert date array to Baseday and Seconds type</li>
<li><strong><a href="https://urbanjost.github.io/M_time/d2b.3m_time.html">d2b</a>(dat) result (bas)</strong>    ! Convert date array to Baseday and Seconds</li>
<li><strong><a href="https://urbanjost.github.io/M_time/b2d.3m_time.html">b2d</a>(bas) result (DAT)</strong>    ! Convert Baseday and Seconds to date array</li>
</ul>
<h3 id="day-of-week">Day of Week</h3>
<ul>
<li><strong><a href="https://urbanjost.github.io/M_time/dow.3m_time.html">dow</a>(dat,[WEEKDAY],[DAY],IERR)</strong> ! Convert date array to day of the week as number and name</li>
</ul>
<h3 id="week-of-year">Week of Year</h3>
<ul>
<li><strong><a href="https://urbanjost.github.io/M_time/d2w.3m_time.html">d2w</a>(dat,ISO_YEAR,ISO_WEEK,ISO_WEEKDAY,ISO_NAME)</strong> ! Calculate iso-8601 Week-numbering year date yyyy-Www-d</li>
<li><strong><a href="https://urbanjost.github.io/M_time/w2d.3m_time.html">w2d</a>([iso8601_week]|[iso_year,iso_week,iso_weekday],DAT)</strong>  ! given iso-8601 Week as numeric year, week and day_of_week, or string &ldquo;yyyy-Www-d&rdquo; calculate date as a DAT array</li>
</ul>
<h3 id="ordinal-day">Ordinal Day</h3>
<ul>
<li><strong><a href="https://urbanjost.github.io/M_time/d2o.3m_time.html">d2o</a>(dat) result(ORDINAL)</strong> ! given date array return ordinal day of year, Jan 1st=1</li>
<li><strong><a href="https://urbanjost.github.io/M_time/o2d.3m_time.html">o2d</a>(ordinal) result(DAT)</strong> ! given ordinal day of year return date array, Jan 1st=1</li>
<li><strong><a href="https://urbanjost.github.io/M_time/ordinal_to_date.3m_time.html">ordinal_to_date</a> (year,ordinal_day,DAT)</strong> ! given ordinal day of year return date array, Jan 1st=1</li>
<li><strong><a href="https://urbanjost.github.io/M_time/ordinal_seconds.3m_time.html">ordinal_seconds</a>()</strong> ! seconds since the beginning of current year</li>
</ul>
<h3 id="printing-dates">Printing Dates</h3>
<ul>
<li><strong><a href="https://urbanjost.github.io/M_time/fmtdate.3m_time.html">fmtdate</a>(dat,format) result (TIMESTR)</strong> ! Convert date array to string using format</li>
<li><strong><a href="https://urbanjost.github.io/M_time/fmtdate_usage.3m_time.html">fmtdate_usage</a>(indent)</strong> ! display macros recognized by fmtdate</li>
<li><strong><a href="https://urbanjost.github.io/M_time/locale.3m_time.html">locale</a>(name,mths,wks,mths,short,wks_short,ierr)</strong> ! allow substituting other strings for month and weekday names, including predefined sets for languages representable in extended ASCII.</li>
<li><strong><a href="https://urbanjost.github.io/M_time/now.3m_time.html">now</a>(format) result (NOW)</strong> ! return string representing current time given format</li>
<li><strong><a href="https://urbanjost.github.io/M_time/box_month.3m_time.html">box_month</a>(dat,CALEN)</strong> ! print specified month into character array</li>
</ul>
<h3 id="printing-durations">Printing Durations</h3>
<ul>
<li><strong><a href="https://urbanjost.github.io/M_time/sec2days.3m_time.html">sec2days</a>(seconds) result (DHMS)</strong>  ! converts seconds to string D-HH:MM:SS</li>
<li><strong><a href="https://urbanjost.github.io/M_time/days2sec.3m_time.html">days2sec</a>(str) result (SECONDS)</strong> ! converts strings like &ldquo;D-HH:MM:SS&rdquo; or &ldquo;4 days 2 hrs&rdquo; to seconds</li>
</ul>
<h3 id="month-name">Month Name</h3>
<ul>
<li><strong><a href="https://urbanjost.github.io/M_time/mo2v.3m_time.html">mo2v</a>(month_name) result (MONTH_NUMBER)</strong> ! given month name return month number</li>
<li><strong><a href="https://urbanjost.github.io/M_time/v2mo.3m_time.html">v2mo</a>(month_number) result (MONTH_NAME)</strong> ! given month number return month name</li>
<li><strong><a href="https://urbanjost.github.io/M_time/mo2d.3m_time.html">mo2d</a>(month_name) result (DAT)</strong>    ! given month name and year return date array for 1st day of month</li>
</ul>
<h3 id="astrological">Astrological</h3>
<ul>
<li><strong><a href="https://urbanjost.github.io/M_time/easter.3m_time.html">easter</a>(year,dat)</strong>    ! calculate month and day Easter falls on for given year</li>
<li><strong><a href="https://urbanjost.github.io/M_time/moon_fullness.3m_time.html">moon_fullness</a>(datin) result(FULLNESS)</strong> ! percentage of moon phase from new to full</li>
<li><strong><a href="https://urbanjost.github.io/M_time/phase_of_moon.3m_time.html">phase_of_moon</a>(datin) result(PHASE)</strong> ! return name for phase of moon for given date</li>
</ul>
<h3 id="reading-dates">Reading Dates</h3>
<ul>
<li><strong><a href="https://urbanjost.github.io/M_time/guessdate.3m_time.html">guessdate</a>(anot,dat)</strong> ! Converts a date string to a date array, in various formats</li>
</ul>
<!--
### C Interface
+ **[system_sleep](https://urbanjost.github.io/M_time/system_sleep.3m_time.html)(wait_seconds)**  ! Call sleep(3c)
-->
<h3 id="convenient-constants-for-use-with-and-operators">Convenient Constants for use with + and - Operators</h3>
<div class="codehilite"><pre><span></span><code><span class="kt">integer</span><span class="p">,</span><span class="k">parameter</span><span class="p">,</span><span class="k">public</span><span class="w">   </span><span class="kd">::</span><span class="w"> </span><span class="n">realtime</span><span class="o">=</span><span class="nb">kind</span><span class="p">(</span><span class="mf">0.0d0</span><span class="p">)</span><span class="w">           </span><span class="c">! type for unix epoch time and julian days</span>

<span class="kt">real</span><span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="n">realtime</span><span class="p">),</span><span class="k">public</span><span class="p">,</span><span class="k">parameter</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">dt_minute</span><span class="o">=</span><span class="mi">6</span><span class="mf">0.0_dp</span><span class="w">     </span><span class="c">! one minute in seconds</span>
<span class="kt">real</span><span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="n">realtime</span><span class="p">),</span><span class="k">public</span><span class="p">,</span><span class="k">parameter</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">dt_hour</span><span class="o">=</span><span class="mi">360</span><span class="mf">0.0_dp</span><span class="w">     </span><span class="c">! one hour in seconds</span>
<span class="kt">real</span><span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="n">realtime</span><span class="p">),</span><span class="k">public</span><span class="p">,</span><span class="k">parameter</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">dt_day</span><span class="o">=</span><span class="mi">8640</span><span class="mf">0.0_dp</span><span class="w">     </span><span class="c">! 24:00:00 hours in seconds</span>
<span class="kt">real</span><span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="n">realtime</span><span class="p">),</span><span class="k">public</span><span class="p">,</span><span class="k">parameter</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">dt_week</span><span class="o">=</span><span class="n">dt_day</span><span class="o">*</span><span class="mf">7.0_dp</span><span class="w"> </span><span class="c">! one week in seconds</span>
</code></pre></div>

<p>&ndash;&gt;</p>
<h2 id="example">Example</h2>
<p>A simple program that formats the current time as desired, and displays
the built-in help text for the formatting options is as simple as</p>
<div class="codehilite"><pre><span></span><code><span class="w">      </span><span class="k">program </span><span class="n">demo_now</span>
<span class="w">      </span><span class="k">use </span><span class="n">M_time</span><span class="p">,</span><span class="w"> </span><span class="k">only</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">now</span>
<span class="w">      </span><span class="k">implicit none</span>
<span class="k">       write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span><span class="n">now</span><span class="p">(</span><span class="s2">&quot;The current date is %w, %l %d, %Y %H:%m:%s %N&quot;</span><span class="p">)</span><span class="w"> </span><span class="c">! % macros</span>
<span class="w">       </span><span class="k">write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span><span class="n">now</span><span class="p">(</span><span class="s2">&quot;year-month-day&quot;</span><span class="p">)</span><span class="w"> </span><span class="c">! or, if macros not found then keywords</span>
<span class="w">       </span><span class="k">write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span><span class="n">now</span><span class="p">(</span><span class="s2">&quot;Y-M-D h:m:s&quot;</span><span class="p">)</span><span class="w">    </span><span class="c">! and if that is not found, abbreviations</span>
<span class="w">       </span><span class="k">call </span><span class="n">locale</span><span class="p">(</span><span class="s1">&#39;french&#39;</span><span class="p">)</span>
<span class="w">       </span><span class="k">write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span><span class="n">now</span><span class="p">(</span><span class="s2">&quot;%W, %L %D, %Y %h:%m:%s &quot;</span><span class="p">)</span>
<span class="w">       </span><span class="k">call </span><span class="n">locale</span><span class="p">(</span><span class="s1">&#39;slovak&#39;</span><span class="p">)</span>
<span class="w">       </span><span class="k">write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span><span class="n">now</span><span class="p">(</span><span class="s2">&quot;%W, %L %D, %Y %h:%m:%s &quot;</span><span class="p">)</span>
<span class="w">       </span><span class="k">call </span><span class="n">locale</span><span class="p">(</span><span class="s1">&#39;spanish&#39;</span><span class="p">)</span>
<span class="w">       </span><span class="k">write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span><span class="n">now</span><span class="p">(</span><span class="s2">&quot;%W, %L %D, %Y %h:%m:%s &quot;</span><span class="p">)</span>
<span class="w">      </span><span class="k">end program </span><span class="n">demo_now</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code>    The current date is Wed, Feb 5th, 2025 8:57:07 AM
    2025-02-05
    2025-02-05 08:57:07
    mercredi, février 05, 2025 08:57:07
    streda, február 05, 2025 08:57:07
    miércoles, febrero 05, 2025 08:57:07
</code></pre></div>

<p>A built-in description of the macro and keyword substitution rules
can be called to easily add the information to program help messages
and documentation.</p>
<div class="codehilite"><pre><span></span><code><span class="w">      </span><span class="k">program </span><span class="n">builtin_macrohelp</span>
<span class="w">      </span><span class="k">use </span><span class="n">M_time</span><span class="p">,</span><span class="w"> </span><span class="k">only</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">fmtdate_usage</span>
<span class="w">      </span><span class="k">implicit none</span>
<span class="w">      </span><span class="c">! built-in usage descriptions can be displayed as well</span>
<span class="w">       </span><span class="k">call </span><span class="n">fmtdate_usage</span><span class="p">()</span><span class="w"> </span><span class="c">! see all formatting options</span>
<span class="w">      </span><span class="k">end program </span><span class="n">builtin_macrohelp</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code>   Description                                        Example

   Base time array:
    1) %Y | year, yyyy                             2025
    2) %M | month of year, 01 to 12                02
    3) %D | day of month, 01 to 31                 19
       %d | day of month with suffix (1st,2nd,...) 19th
       %K | day of month in English (eg. first)    757554556
    4) %Z | minutes from UTC                       -0300m
       %z | -+hh:mm from UTC                       -05:00
       %T | -+hhmm  from UTC                       -0500
    5) %h | hours, 00 to 23                        16
       %H | hour (1 to 12, or twelve-hour clock)   4
       %N | midnight&lt;AM&lt;=noon; noon&lt;=PM&lt;midnight   PM
    6) %m | minutes, 00 to 59                      41
    7) %s | sec, 00 to 59                          53
    8) %x | milliseconds 000 to 999                150
   Conversions:
       %E | Unix Epoch time                        1740001313.1499977
       %e | integer value of Unix Epoch time       1740001313
       %F | Modified Julian date                   60725.904087384231
       %f | integer value of Modified Julian Date  60725
       %G | Baseday and Seconds                    (60725,78113.151003420353)
       %g | Baseday seconds                        78113.151003420353
       %J | Julian  date                           2460726.4040873959
       %j | integer Julian Date(Julian Day)        2460726
       %O | Ordinal day (day of year)              050
       %o | Whole days since Unix Epoch date       20138
       %U | day of week, 1..7 Sunday=1             4
       %u | day of week, 1..7 Monday=1             3
       %i | ISO week of year 1..53                 8
       %I | iso-8601 week with weekday: yyyy-Www-d 2025-W08-3
    Names:
       %l | abbreviated month name                 Feb
       %L | full month name                        February
       %w | first three characters of weekday      Wed
       %W | weekday name                           Wednesday
       %p | phase of moon                          Last quarter
       %P | percent of way from new to full moon   -54%
       %X | day of the month in English            nineteenth
    Literals:
       %% | a literal %                             %
       %t | tab character
       %b | blank character
       %B | exclamation(bang) character            !
       %n | new line (system dependent)

       %q | single quote (apostrophe)              &#39;
       %Q | double quote                           &quot;
    Duration:
       %a | Time since now as d-hh:mm:ss           0-00:00:00
       %A | Time since now as seconds              0.0000000000000000
    Program timing:
       %c | CPU_TIME(3f) output                    0.45703999999999995E-1
       %C | number of times this routine is used   1
       %S | seconds since last use of this format  0.0000000000000000
       %k | time in seconds from SYSTEM_CLOCK(3f)  757554.562
       %K | time in clicks from SYSTEM_CLOCK(3f)   757554565
    Help:
       %? | call fmtdate_usage()

   If no percent (%) is found in the format one of several
   alternate substitutions occurs.

   If the format is composed entirely of one of the following
   keywords the following substitutions occur:
    iso-8601,
    iso          ==&gt; %Y-%M-%DT%h:%m:%s%z ==&gt; 2025-02-19T16:41:53-05:00
    iso-8601W,
    isoweek      ==&gt; %I ==&gt; 2025-W08-3
    sql          ==&gt; %Y-%M-%D %h:%m:%s.%x ==&gt; 2025-02-19 16:41:53.158
    sqlday       ==&gt; %Y-%M-%D ==&gt; 2025-02-19
    sqltime      ==&gt; %h:%m:%s.%x ==&gt; 16:41:53.159
    dash         ==&gt; %Y-%M-%D ==&gt; 2025-02-19
    rfc-2822     ==&gt; %w, %D %l %Y %h:%m:%s %T
                       Wed, 19 Feb 2025 16:41:53 -0500
    rfc-3339     ==&gt; %Y-%M-%DT%h:%m:%s%z ==&gt; 2025-02-19T16:41:53-05:00
    date         ==&gt; %w %l %D %h:%m:%s UTC%z %Y
                       Wed Feb 19 16:41:53 UTC-05:00 2025
    short        ==&gt; %w, %l %d, %Y %H:%m:%s %N UTC%z
                       Wed, Feb 19th, 2025 4:41:53 PM UTC-05:00
    long,&quot; &quot;     ==&gt; %W, %L %d, %Y %H:%m:%s %N UTC%z
                       Wednesday, February 19th, 2025 4:41:53 PM UTC-05:00
    suffix       ==&gt; %Y%D%M%h%m%s ==&gt; 20251902164153
    formal       ==&gt; The %d of %L %Y ==&gt; The 19th of February 2025
    lord         ==&gt; the %d day of %L in the year of our Lord %Y
                       the 19th day of February in the year of our Lord 2025
    easter       ==&gt; FOR THE YEAR OF THE CURRENT DATE:
                       Easter day: the %d day of %L in the year of our Lord %Y
    all          ==&gt; A SAMPLE OF DATE FORMATS
    usage|help|? ==&gt; call fmtdate_usage
   otherwise the following words are replaced with the most
   common macros:
      year                        %Y  2025
      month                       %M  02
      day                         %D  19
      timezone                    %z  -05:00
      hour                        %h  16
      minute                      %m  41
      second                      %s  53
      millisecond                 %x  164
      epoch                       %e  1740001313
      julian                      %j  2460726
      ordinal                     %O  050
      weekday                     %u  3
      longmonth|MONTH             %L  February
      shortmonth|Month|Mth        %l  Feb
      shortday|DAY                %d  19th
      longday                     %X  nineteenth
      goodhour|HOUR               %H  4
      GOOD                        %N  PM
      shortweekday|Weekday|wkday  %w  Wed
      longweekday|WEEKDAY         %W  Wednesday
      Timezone                    %Z  -0300m
      TIMEZONE                    %z  -05:00
      age                         %a  0-00:00:00
      AGE                         %A  0.0000000000000000
</code></pre></div>

<p>If none of these keywords are found then every letter that
   is a macro is assumed to have an implied percent in front
   of it. For example:</p>
<div class="codehilite"><pre><span></span><code>      YMDhms ==&gt; %Y%M%D%h%m%s ==&gt; 20250219164153
</code></pre></div>

<hr>
<h2 id="_1"><img alt="docs" src="docs/images/docs.gif"></h2>
<h2 id="documentation">Documentation</h2>
<h3 id="user">User</h3>
<!--
+ [intro page](https://urbanjost.github.io/M_time/M_time.3m_time.html)
+ [OOP intro page](https://urbanjost.github.io/M_time/M_time_oop.3m_time.html)
-->
<ul>
<li><a href="https://urbanjost.github.io/M_time/man3.html">man-page index</a></li>
<li>
<p><a href="https://urbanjost.github.io/M_time/BOOK_M_time.html">BOOK_M_time</a> is a consolidated
  single-page version of the man-pages for ease in printing and searching(<code>requires javascript</code>)</p>
</li>
<li>
<p>Furthermore there are actual man-pages that can be installed on ULS (Unix-Like Systems):</p>
<ul>
<li><img alt="man-pages" src="docs/images/manpages.gif"> <a href="https://urbanjost.github.io/M_time/manpages.tgz">manpages.tgz</a></li>
<li><img alt="man-pages" src="docs/images/manpages.gif"> <a href="https://urbanjost.github.io/M_time/manpages.zip">manpages.zip</a></li>
</ul>
</li>
</ul>
<h3 id="developer-documentation">Developer Documentation</h3>
<ul>
<li><a href="https://urbanjost.github.io/M_time/doxygen_out/html/index.html">doxygen output</a>.</li>
<li><a href="https://urbanjost.github.io/M_time/fpm-ford/index.html">ford output</a>.</li>
<li><a href="docs/CHANGELOG.md">CHANGELOG</a></li>
</ul>
<hr>
<h2 id="download-tarball-or-zip-file">Download tarball or zip file</h2>
<ul>
<li><a href="https://github.com/urbanjost/M_time/releases">archive</a> files containing released
  versions in tar(1) and zip(1) format.</li>
</ul>
<hr>
<h2 id="_2"><img alt="GNU" src="docs/images/gnu.gif"></h2>
<h2 id="download-and-build-using-gmake">Download and Build using gmake</h2>
<p>To build the modules download the github repository, enter the src/
directory and run make(1):</p>
<div class="codehilite"><pre><span></span><code>     git clone https://github.com/urbanjost/M_time.git
     cd M_time/src

     make clean
     # change Makefile if not using one of the listed compilers
     # COMPILER_NAME={ifort, nvfortran, or gfortran}
     make $COMPILER_NAME
</code></pre></div>

<p>This will compile the M_time module and optionally build all the example programs from
the document pages (in the example/ sub-directory).</p>
<div class="codehilite"><pre><span></span><code>     # optionally
     make run  # run all the demo programs from the man-pages
     make help # see other developer options
</code></pre></div>

<hr>
<h2 id="_3"><img alt="fpm" src="docs/images/fpm_logo.gif"></h2>
<h2 id="download-and-build-using-fpm">Download and Build using fpm</h2>
<p>To download the github repository and build and test it with fpm :</p>
<div class="codehilite"><pre><span></span><code><span class="w">     </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/urbanjost/M_time.git
<span class="w">     </span><span class="nb">cd</span><span class="w"> </span>M_time
<span class="w">     </span><span class="c1"># on MSWindows:</span>
<span class="w">     </span>fpm<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-flag<span class="w"> </span><span class="s2">&quot;-D _WIN32&quot;</span>
<span class="w">     </span><span class="c1"># on other platforms</span>
<span class="w">     </span>fpm<span class="w"> </span><span class="nb">test</span>
</code></pre></div>

<p>or just list it as a dependency in your fpm.toml project file.</p>
<div class="codehilite"><pre><span></span><code><span class="w">     </span><span class="k">[dependencies]</span>
<span class="w">     </span><span class="n">M_time</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/urbanjost/M_time.git&quot;</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>

<hr>
<h2 id="_4"><img alt="cmake" src="docs/images/cmake_logo-1.png"></h2>
<h2 id="download-and-build-using-cmake">Download and Build using cmake</h2>
<p>To download the github repository and build and install with cmake
(you may wish to change the install path in src/CMakeLists.txt first) :</p>
<div class="codehilite"><pre><span></span><code><span class="w">      </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/urbanjost/M_time.git
<span class="w">      </span><span class="nb">cd</span><span class="w"> </span>M_time

<span class="w">      </span><span class="c1"># Create a Build Directory:</span>
<span class="w">      </span>mkdir<span class="w"> </span>-p<span class="w"> </span>build

<span class="w">      </span><span class="nb">cd</span><span class="w"> </span>build
<span class="w">      </span>cmake<span class="w"> </span>-S<span class="w"> </span>../src<span class="w"> </span>-B<span class="w"> </span>.

<span class="w">      </span><span class="c1"># Configure the Build, specifying your preferred compiler (ifort, flang, etc.):</span>
<span class="w">      </span>cmake<span class="w"> </span>.<span class="w"> </span>-DCMAKE_Fortran_COMPILER<span class="o">=</span>gfortran

<span class="w">      </span><span class="c1"># Build the Project:</span>
<span class="w">      </span>cmake<span class="w"> </span>--build<span class="w"> </span>.

<span class="w">      </span><span class="c1">#This creates:</span>
<span class="w">      </span><span class="c1">#</span>
<span class="w">      </span><span class="c1">#    build/lib/libM_time.a (the static library).</span>
<span class="w">      </span><span class="c1">#    build/include/*.mod (module files).</span>
<span class="w">      </span><span class="c1">#    build/test/* (test executables).</span>
<span class="w">      </span><span class="c1">#    build/example/* (example executables).</span>

<span class="w">      </span><span class="c1"># OPTIONAL SECTION:</span>

<span class="w">      </span><span class="c1"># Verify build</span>
<span class="w">      </span>ls<span class="w"> </span>build/lib/libM_time.a
<span class="w">      </span>ls<span class="w"> </span>build/include/*.mod
<span class="w">      </span>ls<span class="w"> </span>build/test/*
<span class="w">      </span>ls<span class="w"> </span>build/example/*

<span class="w">      </span><span class="c1">#Optionally Run Tests and Examples:</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span>name<span class="w"> </span><span class="k">in</span><span class="w"> </span>./test/*<span class="w"> </span>./example/*
<span class="w">      </span><span class="k">do</span>
<span class="w">         </span><span class="nv">$name</span>
<span class="w">      </span><span class="k">done</span>

<span class="w">      </span><span class="c1">#Install (Optional):</span>
<span class="w">      </span><span class="c1"># This installs the library and module files to the system</span>
<span class="w">      </span><span class="c1"># (e.g., /usr/local/lib/ and /usr/local/include/).</span>
<span class="w">      </span>cmake<span class="w"> </span>--install<span class="w"> </span>.

<span class="w">      </span><span class="c1"># if you have insufficient permissions sudo(1) may be required</span>
<span class="w">      </span><span class="c1"># to perform the install</span>
<span class="w">      </span><span class="c1">#sudo cmake --install .</span>

<span class="w">      </span><span class="c1"># Verify installation</span>
<span class="w">      </span>ls<span class="w"> </span>/usr/local/lib/libM_time.a
<span class="w">      </span>ls<span class="w"> </span>/usr/local/include/*.mod

<span class="w">      </span><span class="c1"># Cleaning Up: To clean artifacts, remove the build/ directory:</span>
<span class="w">      </span>rm<span class="w"> </span>-rf<span class="w"> </span>build
</code></pre></div>

<hr>
<h2 id="_5"><img alt="demos" src="docs/images/demo.gif"></h2>
<h2 id="demo-programs">Demo Programs</h2>
<p>Each man-page contains a small sample program that has been extracted
and placed in the <a href="example/">example/</a> directory.  The small example programs
demonstrate how easily you can generate a variety of output formats:</p>
<div class="codehilite"><pre><span></span><code>    Sun, Jan 5th, 2020 10:48:33 AM UTC-05:00

    Sunday, January 5th, 2020 10:48:53 AM UTC-05:00

        January 2020
    Mo Tu We Th Fr Sa Su
           1  2  3  4  5
     6  7  8  9 10 11 12
    13 14 15 16 17 18 19
    20 21 22 23 24 25 26
    27 28 29 30 31

    Julian Date is 2458854.1545532290

    Unix Epoch time is 1578238955.5700049

    ISO-8601 Week: 2020-W01-7

    Day of year is: 5

    for year 2020 days in year is: 366

    weekday=7 day=Sunday

    Easter day: the 12th day of April in the year of our Lord 2020
</code></pre></div>

<p>In particular, the example program &ldquo;now&rdquo; easily lets you try out various
options. With no options it displays allowed formats. For example:</p>
<div class="codehilite"><pre><span></span><code>      ./now year month day
      ./now &#39;julian epoch ordinal&#39;
      ./now &#39;The year is %Y and the month is %M (%L) %h:%m:%s&#39;
      ./now formal

       20200105
       2458854 1578240100 005
       The year is 2020 and the month is 01 (January) 11:01:39
       The 5th of January 2020
</code></pre></div>

<h2 id="definitions">Definitions</h2>
<p>A &ldquo;date_and_time&rdquo; array <strong>&ldquo;DAT&rdquo;</strong> has the same format as the array of
values generated by the Fortran intrinsic DATE_AND_TIME(3f). That is,
it is an 8-element integer array containing year, month, day, Time zone
difference from UTC in minutes, hour, minutes, seconds, and milliseconds
of the second. This array represents a date on the Proleptic Gregorian
Calendar.</p>
<p>The <strong>Proleptic Gregorian Calendar</strong> assumes the Gregorian Calendar
existed back to the beginning of the Julian Day calendar (4713 BC). This
means historic dates will often be confused, as the Julian Calendar was
used in the USA until 1752-09-03, for example. The Gregorian Calendar was
formally decreed on 1582-10-15 but was not adapted in many countries. The
Julian Calendar was first used around 45 BC. Note that the Proleptic
Gregorian Calendar includes a year zero (0). It is frequently used in
computer software to simplify the handling of older dates. For example,
it is the calendar used by MySQL, SQLite, PHP, CIM, Delphi, Python and
COBOL. The Proleptic Gregorian Calendar is explicitly required for all
dates before 1582 by ISO 8601:2004 (clause 4.3.2.1 The Gregorian calendar)
if the partners to information exchange agree.</p>
<p><strong>Unix Epoch Time (UET)</strong> is defined as the number of seconds since
00:00:00 on January 1st. 1970, UTC.</p>
<p>A <strong>JD</strong> is defined as a <strong>Julian Date</strong>. JD days start at
noon (not at midnight). 4713-01-01 BC at noon is defined as JD 0.0.</p>
<p>If you are not familiar with them, in this context Julian Dates and Unix
Epoch Times are scalar numbers that allow for easy computations using
dates (to go back one day just subtract one from a Julian Date, for
example). Since these values are generally not considered intelligible,
routines are included to convert between these scalar values and the
date array so human-readable results can be obtained.</p>
<p><strong>Modified Julian Date (MJD)</strong> measures days (and fractional days) since
the start of 17 Nov 1858 CE in Universal Time (UTC). Julian Date (JD)
measures days (and fractional days) since noon on 1 January, 4713 BCE
in Universal Time (UTC).</p>
<div class="codehilite"><pre><span></span><code>Modified Julian Date (MJD) = Julian Date (JD) - 2400000.5
</code></pre></div>

<p><strong>Baseday and Seconds (BAS)</strong> dates are an alternate form of the MJD
(Modified Julian Date) where the date is stored as a structure named
&ldquo;<em>BAStime</em>&rdquo;, containing the number of days since the beginning of the MJD
Epoch and a double representing the seconds offset from the start of
this day.</p>
<div class="codehilite"><pre><span></span><code><span class="w">   </span><span class="k">type </span><span class="n">BAStime</span>
<span class="w">      </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">base_day</span><span class="w">       </span><span class="c">! number of days since the MJD Epoch date</span>
<span class="w">      </span><span class="kt">real</span><span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="n">real64</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">secs</span><span class="w"> </span><span class="c">! seconds from start of base_day</span>
<span class="w">   </span><span class="k">end type </span><span class="n">BAStime</span>
</code></pre></div>

<p>This allows for storing a date at a higher precision that the other
formats used by the library, although sometimes that lower precision
is limited primarily by the definition (ie. the milliseconds in a DAT
could be smaller units).</p>
<p>BAS (and MJD) starts at midnight (00:00:00) so truncating the
fractional component of BAS always gives the same Civil Calendar day
whatever the time of day (unlike JD).</p>
<p>The seconds offset may take any double-precision value, so that any
date/time may be expressed in terms of an offset from the same MJD
day. The seconds field thus may exceed a single day, and may also be
negative. Note that in floating-point math larger numbers will have
a wider spacing between representable values, possibly decreasing
the precision of results.</p>
<p><strong>Coordinated Universal Time</strong> (French: Temps universel coordonn&rsquo;e),
abbreviated as <strong>UTC</strong>, is the primary time standard by which the world
regulates clocks and time. It is within about 1 second of mean solar
time at 0o longitude;[1] it does not observe daylight saving time. It
is one of several closely related successors to Greenwich Mean Time
(GMT). For most purposes, UTC is considered interchangeable with GMT,
but GMT is no longer precisely defined by the scientific community.</p>
<h2 id="limitations">Limitations</h2>
<p>Like most collections of date and time procedures M_time is <em>not</em> a
high- precision library that accounts internally for leap seconds and
relativistic effects.</p>
<p>M_time(3f) is intended for use in the recent era and is not appropriate
for use with historical dates that used some other calendar scheme such
as the Julian Calendar. That is, you have to remember to account for
conversions to other calendar systems when using historical dates.</p>
<p>When Daylight Savings is in effect calculations will generally be correct,
as the date model includes a timezone value; but you are responsible for
ensuring dates you create use the correct timezone value or otherwise
account for Daylight Savings Time as needed.</p>
<p>Currently, dates are manipulated using the current system timezone, which
can typically be set using the environment variable TZ. So if you desire
to set the default timezone you generally set the environment variable
<em>before</em> executing your program. This is compatible with current observed
behavior for the intrinsic procedure DATE_AND_TIME(3f) with compilers I
have tested with, but does not seem to be a specified behavior as far as
the standard is concerned. That is, DATE_AND_TIME(3f) returns a vector
that contains a current time zone, but does not specify how a current
time zone can be explicitly set.  Since this library is intentionally
designed to complement DATE_AND_TIME(3f) it adopts the same behavior.</p>
<h3 id="status">Status</h3>
<ul>
<li><a href="docs/STATUS.md">CD/CI STATUS</a></li>
</ul>
<h2 id="see-also">See Also</h2>
<p>The ISO-8601 standard is often used for business-related transactions.</p>
<p>There are (of course) the C/C++ intrinsics which provide much of the same
functionality that should be bindable to Fortran via the ISO_C_BINDING
module.</p>
<p>If you are looking for a high-precision Fortran library that is well
tested for manipulating dates I would suggest looking at the NASA
SPICElib library.  If you care about Leap Seconds, Orbital Mechanics,
GPS/Satellite communications, and Astronomy it is worth a look.</p>
<p>The Fortran Wiki <a href="http://fortranwiki.org"> fortranwiki.org </a> contains
information on other libraries and modules that provide date-time
procedures.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Gregorian_calendar">Gregorian Calendar(Wikipedia)</a></li>
</ul>
<!--
   TODO:

http://plplot.sourceforge.net/docbook-manual/plplot-html-5.15.0/enhancement-libraries.html

-->
<hr>
        </div>
          <div class="col-md-4">
            <div class="card card-body bg-light">
              <h2 class="card-title">Developer Info</h2>
              <h4 class="card-text">John S. Urban</h4>
              <p class="card-text"></p>
                <div class="text-center"><div class="btn-group" role="group">
                    
                    <a class="btn btn-lg btn-primary" href="https://github.com/urbanjost/M_time"><i class="fa fa-github fa-lg"></i></a>
                    
                    
                    
                    
                    
                    
                </div></div>
            </div>
          </div>
      </div>
        <div class="row">
          <hr>
          <div class="col-xs-6 col-sm-3">
            <div>
              <h3>Source Files</h3>
              <ul><li><a href='sourcefile/days2sec.f90.html'>days2sec.f90</a></li><li><a href='sourcefile/demo_b2d.f90.html'>demo_b2d.f90</a></li><li><a href='sourcefile/demo_bas_to_date.f90.html'>demo_bas_to_date.f90</a></li><li><a href='sourcefile/demo_box_month.f90.html'>demo_box_month.f90</a></li><li><a href='sourcefile/demo_d2b.f90.html'>demo_d2b.f90</a></li><li><a href='sourcefile/demo_d2j.f90.html'>demo_d2j.f90</a></li><li><a href='sourcefile/demo_d2m.f90.html'>demo_d2m.f90</a></li><li><a href='sourcefile/demo_d2o.f90.html'>demo_d2o.f90</a></li><li><a href='sourcefile/demo_d2u.f90.html'>demo_d2u.f90</a></li><li><a href='sourcefile/demo_d2w.f90.html'>demo_d2w.f90</a></li></ul>
            </div>
            <div>
              <ul>
                <li><a href="./lists/files.html"><em>All source files&hellip;</em></a></li>
              </ul>
            </div>
          </div>
          <div class="col-xs-6 col-sm-3">
            <div>
              <h3>Modules</h3>
              <ul><li><a href='module/m_time__duplicate.html'>M_time__duplicate</a></li><li><a href='module/m_time__oop.html'>M_time__oop</a></li></ul>
            </div>
            <div>
              <ul>
                <li><a href="./lists/modules.html"><em>All modules&hellip;</em></a></li>
              </ul>
            </div>
          </div>
          <div class="col-xs-6 col-sm-3">
            <div>
              <h3>Procedures</h3>
              <ul><li><a href='proc/adjustc.html'>adjustc</a></li><li><a href='proc/compact.html'>compact</a></li><li><a href='interface/date_time.html'>date_time</a></li><li><a href='proc/get_cmd.html'>get_cmd</a></li><li><a href='proc/get_cmd~2.html'>get_cmd</a></li><li><a href='proc/help_usage.html'>help_usage</a></li><li><a href='proc/help_usage~2.html'>help_usage</a></li><li><a href='proc/help_usage~3.html'>help_usage</a></li><li><a href='proc/help_usage~4.html'>help_usage</a></li><li><a href='proc/help_usage~5.html'>help_usage</a></li></ul>
            </div>
            <div>
              <ul>
                <li><a href="./lists/procedures.html"><em>All procedures&hellip;</em></a></li>
              </ul>
            </div>
          </div>
          <div class="col-xs-6 col-sm-3">
            <div>
              <h3>Derived Types</h3>
              <ul><li><a href='type/date_time.html'>date_time</a></li></ul>
            </div>
            <div>
              <ul>
                <li><a href="./lists/types.html"><em>All derived types&hellip;</em></a></li>
              </ul>
            </div>
          </div>
        </div>
      <hr>
    </div> <!-- /container -->
    <footer>
      <div class="container">
        <div class="row justify-content-between">
          <div class="col">
            <p>
              M_time
 was developed by John S. Urban<br>              &copy; 2025 
</p>
          </div>
          <div class="col">
            <p class="text-end">
              Documentation generated by
              <a href="https://github.com/Fortran-FOSS-Programmers/ford">FORD</a>
 on 2025-07-10 07:57 +0000             </p>
          </div>
        </div>
        <br>
      </div> <!-- /container -->
    </footer>
  </body>
</html>