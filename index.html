<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="description" content="Fortran date and time manipulation and presentation">
    <meta name="author" content="John S. Urban" >
    <link rel="icon" href="./favicon.png">

    <title> M_time </title>

    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <link href="./css/pygments.css" rel="stylesheet">
    <link href="./css/font-awesome.min.css" rel="stylesheet">
    <link href="./css/local.css" rel="stylesheet">
    <link  href="./tipuesearch/tipuesearch.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <script src="./js/jquery-2.1.3.min.js"></script>
    <script src="./js/svg-pan-zoom.min.js"></script>

  </head>

  <body>

    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="./index.html">M_time </a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown hidden-xs visible-sm visible-md hidden-lg">
              <a href="#" class="dropdown-toggle"
              data-toggle="dropdown" role="button"
              aria-haspopup="true"
     aria-expanded="false">Contents <span class="caret"></span></a>
        <ul class="dropdown-menu">
            <li><a href="./lists/files.html">Source Files</a></li>
            <li><a href="./lists/modules.html">Modules</a></li>
            <li><a href="./lists/procedures.html">Procedures</a></li>
                   <li><a href="./lists/types.html">Derived Types</a></li>
            <li><a href="./lists/programs.html">Programs</a></li>
       
            </ul>
        
            </li>
<li class="visible-xs hidden-sm visible-lg"><a href="./lists/files.html">Source Files</a></li>
<li class="visible-xs hidden-sm visible-lg"><a href="./lists/modules.html">Modules</a></li>
<li class="visible-xs hidden-sm visible-lg"><a href="./lists/procedures.html">Procedures</a></li>
                             <li class="visible-xs hidden-sm visible-lg"><a href="./lists/types.html">Derived Types</a></li>
<li class="visible-xs hidden-sm visible-lg"><a href="./lists/programs.html">Programs</a></li>
          </ul>
        <form action="./search.html" class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search" name="q" id="tipue_search_input" autocomplete="off" required>
        </div>
<!--
        <button type="submit" class="btn btn-default">Submit</button>
-->
        </form>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
      <!-- Main component for a primary marketing message or call to action -->
      <div class="jumbotron">
        <p>Fortran date and time manipulation and presentation</p>
	<p> Find us on&hellip;</p>
        <p>
          <a class="btn btn-lg btn-primary" href="https://github.com/urbanjost/M_time" role="button">GitHub</a>
        </p>
      </div>

      <div class="row" id='text'>
        <div class="col-md-8">
          <h1>M_time</h1>
          <!--
author_pic:
twitter:
website:
-->
<h3 id="m_timef90-and-associated-files">M_time.f90 and associated files</h3>
<h4 id="changelog"><a href="docs/CHANGELOG.md">CHANGELOG</a></h4>
<p><img alt="pocketwatch" src="docs/images/M_time.3m_time.gif"></p>
<h2 id="name">Name</h2>
<p>M_time - Fortran module for manipulating and presenting time and date values</p>
<h2 id="description">Description</h2>
<p>M_time(3f) can be used to display Civilian Calendar dates in many formats.</p>
<p>In addition, it can manipulate or read many other date representations
such as &hellip;</p>
<ul>
<li>Julian Dates</li>
<li>Unix Epoch Dates</li>
<li>High-level date formatting</li>
<li>Ordinal days of the year</li>
<li>days of the week</li>
<li>ISO-8601 week numbers</li>
<li>month and weekday names</li>
</ul>
<p><strong>Julian</strong> and <strong>Unix Epoch Dates</strong> are particularly useful for
manipulating dates in simple numeric expressions.</p>
<p>The <code>M_time Fortran</code> module complements the <code>DATE_AND_TIME(3f)</code> procedure
( it is the standard Fortran intrinsic subroutine that returns the
current date and time in the Gregorian calendar). That is, the primary
way this module represents dates is as an integer array with the same
meaning for elements as defined by the <code>DATE_AND_TIME(3f)</code> routine.</p>
<p>The extensive formatting options include showing <code>SYSTEM_CLOCK(3f)</code>
and <code>CPU_USAGE(3f)</code> information along with Gregorian date information,
allowing for the easy incorporation of timing information into program
messages.</p>
<p>In addition to conventional Civilian Calendar dates, the module supports
the ISO-8601 standard.</p>
<p>Both a procedural and OOP (Object Oriented Programming) interface are
provided.</p>
<p>Each routine is accompanied by a man(1) page which includes a sample
program for that procedure. An HTML manual, the source, and example
programs are included in the package.</p>
<h2 id="documentation">Documentation   <img alt="docs" src="docs/images/docs.gif"></h2>
<h3 id="user">User</h3>
<ul>
<li><a href="https://urbanjost.github.io/M_time/M_time.3m_time.html">intro page</a></li>
<li><a href="https://urbanjost.github.io/M_time/M_time_oop.3m_time.html">OOP intro page</a></li>
<li><a href="https://urbanjost.github.io/M_time/man3.html">man-page index</a></li>
<li><a href="https://urbanjost.github.io/M_time/BOOK_M_time.html">BOOK_M_time</a> is a consolidated
  single-page version of the man-pages for ease in printing and searching(<code>requires javascript</code>)</li>
</ul>
<p><img alt="man-pages" src="docs/images/manpages.gif"></p>
<p>Furthermore there are actual man-pages that can be installed on ULS (Unix-Like Systems):</p>
<p><a href="https://urbanjost.github.io/M_time/manpage.tgz">manpage.tgz</a>
and
<a href="https://urbanjost.github.io/M_time/manpage.zip">manpage.zip</a></p>
<h3 id="developer-documentation-experimental">Developer Documentation (experimental)</h3>
<h4 id="doxygen">doxygen</h4>
<ul>
<li><a href="https://urbanjost.github.io/M_time/doxygen_out/html/index.html">doxygen output</a>.</li>
</ul>
<h4 id="ford">ford</h4>
<ul>
<li><a href="https://urbanjost.github.io/M_time/fpm-ford/index.html">ford output</a>.</li>
</ul>
<h2 id="download-and-build-using-gmake">Download and Build using gmake<img alt="GNU" src="docs/images/gnu.gif"></h2>
<p>To build the modules download the github repository, enter the src/
directory and run make(1):</p>
<div class="codehilite"><pre><span></span><code> <span class="nv">git</span> <span class="nv">clone</span> <span class="nv">https</span>:<span class="o">//</span><span class="nv">github</span>.<span class="nv">com</span><span class="o">/</span><span class="nv">urbanjost</span><span class="o">/</span><span class="nv">M_time</span>.<span class="nv">git</span>
 <span class="nv">cd</span> <span class="nv">M_time</span><span class="o">/</span><span class="nv">src</span>

 <span class="nv">make</span> <span class="nv">clean</span>
 # <span class="nv">change</span> <span class="nv">Makefile</span> <span class="k">if</span> <span class="nv">not</span> <span class="nv">using</span> <span class="nv">one</span> <span class="nv">of</span> <span class="nv">the</span> <span class="nv">listed</span> <span class="nv">compilers</span>
 # <span class="nv">COMPILER_NAME</span><span class="o">=</span>{<span class="nv">ifort</span>, <span class="nv">nvfortran</span>, <span class="nv">or</span> <span class="nv">gfortran</span>}
 <span class="nv">make</span> <span class="mh">$C</span><span class="nv">OMPILER_NAME</span>

 # <span class="nv">optionally</span>
 <span class="nv">make</span> <span class="nv">help</span> # <span class="nv">see</span> <span class="nv">other</span> <span class="nv">developer</span> <span class="nv">options</span>
 <span class="nv">make</span> <span class="nv">run</span>  # <span class="nv">run</span> <span class="nv">all</span> <span class="nv">the</span> <span class="nv">demo</span> <span class="nv">programs</span> <span class="nv">from</span> <span class="nv">the</span> <span class="nv">man</span><span class="o">-</span><span class="nv">pages</span>
</code></pre></div>

<p>This will compile the M_time module and optionally build all the example programs from
the document pages (in the example/ sub-directory) and run the unit tests.</p>
<h2 id="download-and-build-using-fpm">Download and Build using fpm<img alt="fpm" src="docs/images/fpm_logo.gif"></h2>
<p>To download the github repository and build and test it with fpm :</p>
<div class="codehilite"><pre><span></span><code>     git clone https://github.com/urbanjost/M_time.git
     <span class="nb">cd</span> M_time
     <span class="c1"># on MSWindows:</span>
     fpm <span class="nb">test</span> -flag <span class="s2">&quot;-D _WIN32&quot;</span>
     <span class="c1"># on other platforms</span>
     fpm <span class="nb">test</span>
</code></pre></div>

<p>or just list it as a dependency in your fpm.toml project file.</p>
<div class="codehilite"><pre><span></span><code><span class="w">     </span><span class="k">[dependencies]</span><span class="w"></span>
<span class="w">     </span><span class="n">M_time</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://github.com/urbanjost/M_time.git&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>

<h2 id="demo-programs">Demo Programs<img alt="demos" src="docs/images/demo.gif"></h2>
<p>Each man-page contains a small sample program that has been extracted
and placed in the example/ directory.  The small example programs
demonstrate how easily you can generate a variety of output formats:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">Sun</span>, <span class="nv">Jan</span> <span class="mi">5</span><span class="nv">th</span>, <span class="mi">2020</span> <span class="mi">10</span>:<span class="mi">48</span>:<span class="mi">33</span> <span class="nv">AM</span> <span class="nv">UTC</span><span class="o">-</span><span class="mi">05</span>:<span class="mi">00</span>

<span class="nv">Sunday</span>, <span class="nv">January</span> <span class="mi">5</span><span class="nv">th</span>, <span class="mi">2020</span> <span class="mi">10</span>:<span class="mi">48</span>:<span class="mi">53</span> <span class="nv">AM</span> <span class="nv">UTC</span><span class="o">-</span><span class="mi">05</span>:<span class="mi">00</span>

    <span class="nv">January</span> <span class="mi">2020</span>
<span class="nv">Mo</span> <span class="nv">Tu</span> <span class="nv">We</span> <span class="nv">Th</span> <span class="nv">Fr</span> <span class="nv">Sa</span> <span class="nv">Su</span>
       <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span>  <span class="mi">5</span>
 <span class="mi">6</span>  <span class="mi">7</span>  <span class="mi">8</span>  <span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span>
<span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span> <span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span>
<span class="mi">20</span> <span class="mi">21</span> <span class="mi">22</span> <span class="mi">23</span> <span class="mi">24</span> <span class="mi">25</span> <span class="mi">26</span>
<span class="mi">27</span> <span class="mi">28</span> <span class="mi">29</span> <span class="mi">30</span> <span class="mi">31</span>

<span class="nv">Julian</span> <span class="nv">Date</span> <span class="nv">is</span> <span class="mi">2458854</span>.<span class="mi">1545532290</span>

<span class="nv">Unix</span> <span class="nv">Epoch</span> <span class="nv">time</span> <span class="nv">is</span> <span class="mi">1578238955</span>.<span class="mi">5700049</span>

<span class="nv">ISO</span><span class="o">-</span><span class="mi">8601</span> <span class="nv">Week</span>: <span class="mi">2020</span><span class="o">-</span><span class="nv">W01</span><span class="o">-</span><span class="mi">7</span>

<span class="nv">Day</span> <span class="nv">of</span> <span class="nv">year</span> <span class="nv">is</span>: <span class="mi">5</span>

<span class="k">for</span> <span class="nv">year</span> <span class="mi">2020</span> <span class="nv">days</span> <span class="nv">in</span> <span class="nv">year</span> <span class="nv">is</span>: <span class="mi">366</span>

<span class="nv">weekday</span><span class="o">=</span><span class="mi">7</span> <span class="nv">day</span><span class="o">=</span><span class="nv">Sunday</span>

<span class="nv">Easter</span> <span class="nv">day</span>: <span class="nv">the</span> <span class="mi">12</span><span class="nv">th</span> <span class="nv">day</span> <span class="nv">of</span> <span class="nv">April</span> <span class="nv">in</span> <span class="nv">the</span> <span class="nv">year</span> <span class="nv">of</span> <span class="nv">our</span> <span class="nv">Lord</span> <span class="mi">2020</span>
</code></pre></div>

<p>In particular, the example program &ldquo;now&rdquo; easily lets you try out various
options. With no options it displays allowed formats. For example:</p>
<div class="codehilite"><pre><span></span><code>  ./now year month day
  ./now &#39;julian epoch ordinal&#39;
  ./now &#39;The year is %Y and the month is %M (%L) %h:%m:%s&#39;
  ./now formal

   20200105
   2458854 1578240100 005
   The year is 2020 and the month is 01 (January) 11:01:39
   The 5th of January 2020
</code></pre></div>

<h2 id="definitions">Definitions</h2>
<p>A &ldquo;date_and_time&rdquo; array <strong>&ldquo;DAT&rdquo;</strong> has the same format as the array of
values generated by the Fortran intrinsic DATE_AND_TIME(3f). That is,
it is an 8-element integer array containing year, month, day, Time zone
difference from UTC in minutes, hour, minutes, seconds, and milliseconds
of the second. This array represents a date on the Proleptic Gregorian
Calendar.</p>
<p>The <strong>Proleptic Gregorian Calendar</strong> assumes the Gregorian Calendar
existed back to the beginning of the Julian Day calendar (4713 BC). This
means historic dates will often be confused, as the Julian Calendar was
used in the USA until 1752-09-03, for example. The Gregorian Calendar was
formally decreed on 1582-10-15 but was not adapted in many countries. The
Julian Calendar was first used around 45 BC. Note that the Proleptic
Gregorian Calendar includes a year zero (0). It is frequently used in
computer software to simplify the handling of older dates. For example,
it is the calendar used by MySQL, SQLite, PHP, CIM, Delphi, Python and
COBOL. The Proleptic Gregorian Calendar is explicitly required for all
dates before 1582 by ISO 8601:2004 (clause 4.3.2.1 The Gregorian calendar)
if the partners to information exchange agree.</p>
<p><strong>Unix Epoch Time (UET)</strong> is defined as the number of seconds since
00:00:00 on January 1st. 1970, UTC.</p>
<p>A <strong>JED</strong> is defined as a <strong>Julian Ephemeris Date</strong>. JED days start at
noon (not at midnight). 4713-01-01 BC at noon is defined as JED 0.0.</p>
<p>If you are not familiar with them, in this context Julian Dates and Unix
Epoch Times are scalar numbers that allow for easy computations using
dates (to go back one day just subtract one from a Julian Date, for
example). Since these values are generally not considered intelligible,
routines are included to convert between these scalar values and the
date array so human-readable results can be obtained.</p>
<p><strong>Coordinated Universal Time</strong> (French: Temps universel coordonn&rsquo;e),
abbreviated as <strong>UTC</strong>, is the primary time standard by which the world
regulates clocks and time. It is within about 1 second of mean solar
time at 0o longitude;[1] it does not observe daylight saving time. It
is one of several closely related successors to Greenwich Mean Time
(GMT). For most purposes, UTC is considered interchangeable with GMT,
but GMT is no longer precisely defined by the scientific community.</p>
<h2 id="limitations">Limitations</h2>
<p>Like most collections of date and time procedures M_time is <em>not</em> a
high- precision library that accounts internally for leap seconds and
relativistic effects.</p>
<p>M_time(3f) is intended for use in the recent era and is not appropriate
for use with historical dates that used some other calendar scheme such
as the Julian Calendar. That is, you have to remember to account for
conversions to other calendar systems when using historical dates.</p>
<p>When Daylight Savings is in effect calculations will generally be correct,
as the date model includes a timezone value; but you are responsible for
ensuring dates you create use the correct timezone value or otherwise
account for Daylight Savings Time as needed.</p>
<p>Currently, dates are manipulated using the current system timezone, which
can typically be set using the environment variable TZ. So if you desire
to set the default timezone you generally set the environment variable
<em>before</em> executing your program. This is compatible with current observed
behavior for the intrinsic procedure DATE_AND_TIME(3f) with compilers I
have tested with, but does not seem to be a specified behavior as far as
the standard is concerned. That is, DATE_AND_TIME(3f) returns a vector
that contains a current time zone, but does not specify how a current
time zone can be explicitly set.  Since this library is intentionally
designed to complement DATE_AND_TIME(3f) it adopts the same behavior.</p>
<h2 id="see-also">See Also</h2>
<p>The ISO-8601 standard is often used for business-related transactions.</p>
<p>There are (of course) the C/C++ intrinsics which provide much of the same
functionality that should be bindable to Fortran via the ISO_C_BINDING
module.</p>
<p>If you are looking for a high-precision Fortran library that is well
tested for manipulating dates I would suggest looking at the NASA
SPICElib library.  If you care about Leap Seconds, Orbital Mechanics,
GPS/Satellite communications, and Astronomy it is worth a look.</p>
<p>The Fortran Wiki <a href="http://fortranwiki.org"> fortranwiki.org </a> contains
information on other libraries and modules that provide date-time
procedures.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Gregorian_calendar">Gregorian Calendar(Wikipedia)</a></li>
<li><a href="https://github.com/fortran-lang/fpm">Fortran Package Manager</a> </li>
<li><a href="https://github.com/fortran-lang/fpm-registry">fpm(1) registry</a></li>
<li><a href="https://docs.github.com/en/actions">github actions</a></li>
</ul>
<!--
   TODO:

http://plplot.sourceforge.net/docbook-manual/plplot-html-5.15.0/enhancement-libraries.html

-->
<hr>
        </div>
        <div class="col-md-4">
	  <div class="well">
          <h2>Developer Info</h2>
          <h4>John S. Urban</h4>
          
            <div class="text-center"><div class="btn-group" role="group">
              <a class="btn btn-lg btn-primary" href="https://github.com/urbanjost/M_time"><i class="fa fa-github fa-lg"></i></a>
            </div></div>
       </div>
       </div>
      </div>
      <div class="row">
        <div class="col-xs-6 col-sm-3">
              <h3>Source Files</h3>
              <ul>                    <li><a href='./sourcefile/days2sec.f90.html'>days2sec.f90</a></li>
                    <li><a href='./sourcefile/demo_box_month.f90.html'>demo_box_month.f90</a></li>
                    <li><a href='./sourcefile/demo_d2j.f90.html'>demo_d2j.f90</a></li>
                    <li><a href='./sourcefile/demo_d2o.f90.html'>demo_d2o.f90</a></li>
                    <li><a href='./sourcefile/demo_d2u.f90.html'>demo_d2u.f90</a></li>
                    <li><a href='./sourcefile/demo_d2w.f90.html'>demo_d2w.f90</a></li>
                    <li><a href='./sourcefile/demo_date_to_julian.f90.html'>demo_date_to_julian.f90</a></li>
                    <li><a href='./sourcefile/demo_date_to_unix.f90.html'>demo_date_to_unix.f90</a></li>
                    <li><a href='./sourcefile/demo_days2sec.f90.html'>demo_days2sec.f90</a></li>
                    <li><a href='./sourcefile/demo_dow.f90.html'>demo_dow.f90</a></li>
</ul>
          </div>
		  <div class="col-xs-6 col-sm-3">
              <h3>Modules</h3>
              <ul>                    <li><a href='./module/m_time.html'>M_time</a></li>
                    <li><a href='./module/m_time_duplicate.html'>M_time_duplicate</a></li>
                    <li><a href='./module/m_time_oop.html'>M_time_oop</a></li>
</ul>
          </div>
		  <div class="col-xs-6 col-sm-3">
              <h3>Procedures</h3>
              <ul>                    <li><a href='./proc/a2d.html'>a2d</a></li>
                    <li><a href='./proc/a2i.html'>a2i</a></li>
                    <li><a href='./proc/a2r.html'>a2r</a></li>
                    <li><a href='./proc/adjustc.html'>adjustc</a></li>
                    <li><a href='./proc/box_month.html'>box_month</a></li>
                    <li><a href='./proc/compact.html'>compact</a></li>
                    <li><a href='./proc/d2j.html'>d2j</a></li>
                    <li><a href='./proc/d2o.html'>d2o</a></li>
                    <li><a href='./proc/d2s.html'>d2s</a></li>
                    <li><a href='./proc/d2u.html'>d2u</a></li>
</ul>
          </div>
		  <div class="col-xs-6 col-sm-3">
              <h3>Derived Types</h3>
              <ul>                    <li><a href='./type/date_time.html'>date_time</a></li>
</ul>
          </div>
      </div>
    <hr>    
    </div> <!-- /container -->
    <footer>
      <div class="container">
      <div class="row">
        <div class="col-xs-6 col-md-6"><p>M_time was developed by John S. Urban<br>&copy; 2022 
</p>
        </div>
        <div class="col-xs-6 col-md-6">
          <p class="text-right">
            Documentation generated by 
            <a href="https://github.com/Fortran-FOSS-Programmers/ford">FORD</a>
 on 2022-08-03 21:24            </p>
        </div>
      </div>
      <br>
      </div> <!-- /container -->    
    </footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
<!--
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
-->
    <script src="./js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="./js/ie10-viewport-bug-workaround.js"></script>

    <!-- MathJax JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },
        jax: ['input/TeX','input/MathML','output/HTML-CSS'],
        extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']
      });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script src="./tipuesearch/tipuesearch_content.js"></script>
    <script src="./tipuesearch/tipuesearch_set.js"></script>
    <script src="./tipuesearch/tipuesearch.js"></script>
    
  </body>
</html>